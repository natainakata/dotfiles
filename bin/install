#!/bin/bash

DOT_DIR="$HOME/.dotfiles"

has() {
  type "$1" > /dev/null 2>&1
}

if [ ! -d ${DOT_DIR} ]; then
  if has "git"; then
    git clone https://github.com/natainakata/dotfiles.git ${DOT_DIR}
  else
    echo "git required"
    exit 1
  fi
  cd ${DOT_DIR}
  if [ ! -d "$HOME/.cargo/" ]; then
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
  fi
  make install
  . "$HOME/.asdf/asdf.sh"
	cat "${DOT_DIR}/tool-versions" | awk '{print $1}' | xargs -I X asdf plugin add X
	asdf install

  # if has "zsh"; then
    # zsh
  # fi
else
  echo "dotfiles already exists"
  exit 1
fi
